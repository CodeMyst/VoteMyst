@using VoteMyst
@using VoteMyst.Database

@inject UserProfileBuilder _profileBuilder

@{
    UserAccount user = User.Identity.IsAuthenticated ? _profileBuilder.FromPrincipal(User) : null;
}

@if (user != null)
{
    <a href="/users/me" class="widget user-widget">
        <partial name="_Avatar" for="@user" />
        <p class="username">@user.Username</p>
    </a>
}
else 
{
    <a href="/login" class="widget login-widget">
        <p>Sign in</p>
    </a>
}